function encrypt(myMessage){
    var result = "";
    
    for (var i = 0; i < myMessage.length; i++) {
        var letterCode = myMessage.charCodeAt(i);
        var binary = letterCode.toString(2);
        while (binary.length < 8) {
            binary = "0" + binary;
        }
        result = result + binary;
    }

    return result;
}
function decrypt(message) {
    var chunk;
    var result = "";

    for (var i = 0; i < message.length; i += 8) {
        chunk = message.substring(i, i + 8);
        var charCode = parseInt(chunk, 2);
        var char = String.fromCharCode(charCode);
        result += char;
    }

    return result;
}

function xorMsg(bitString, message) {
    var result = "";
    for (var i = 0, len = message.length; i < len; i++) {
        result += message[i] ^ bitString[i];
    }
    return result;
}

var bitString = 01001000011101010100101010111001010110101010100010010100001010101110110100100001110101010010101011100101011010101010001001010000101010111011010010000111010101001010101110010101101010101000100101000010101011101101001000011101010100101010111001010110101010100010010100001010101110110100100001110101010010101011100101011010101010001001010000101010111011010010000111010101001010101110010101101010101000100101000010101011101101001000011101010100101010111001010110101010100010010100001010101110110100100001110101010010101011100101011010101010001001010000101010111011010010000111010101001010101110010101101010101000100101000010101011101101001000011101010100101010111001010110101010100010010100001010101110110100100001110101010010101011100101011010101010001001010000101010111011010010000111010101001010101110010101101010101000100101000010101011101101001000011101010100101010111001010110101010100010010100001010101110110100100001110101010010101011100101011010101010001001010000101010111011010010000111010101001010101110010101101010101000100101000010101011101101001000011101010100101010111001010110101010100010010100001010101110110100100001110101010010101011100101011010101010001001010000101010111011;

var originalText = "This is a secret.";
var afterBinary = encrypt(originalText);
var after1stXOR = xorMsg(bitString, afterBinary);
var after2ndXOR = xorMsg(bitString, after1stXOR);
var finalText = decrypt(after2ndXOR);
console.log(`Original Text:\t${originalText}\n\nAfter Binary:\t${afterBinary}\n\nAfter 1st XOR:\t${after1stXOR}\n\nAfter 2nd XOR:\t${after2ndXOR}\n\nFinal Text:\t${finalText}`);